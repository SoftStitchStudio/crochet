<script>
  const params = new URLSearchParams(window.location.search);
  const category = params.get("category");

  const list = document.getElementById("productList");

  products
    .filter(p => p.category === category)
    .forEach(p => {

      const card = document.createElement("div");
      card.className = "product-card";
      card.dataset.id = p.id;

      card.innerHTML = `
        <div class="product-image">
          <img src="${p.image}" alt="${p.name}">
        </div>

        <div class="product-info">
          <h3>${p.name}</h3>
          <p class="price">₹ ${p.price}</p>
        </div>

        <div class="product-actions">
          <button class="add-btn">
            Add to Cart
          </button>
        </div>
      `;

      /* Card Click → Product Page */
      card.addEventListener("click", () => {
        window.location.href = `product.html?id=${p.id}`;
      });

      /* Prevent redirect when clicking button */
      card.querySelector(".add-btn").addEventListener("click", (e) => {
        e.stopPropagation();
        addToCart(p);
      });

      list.appendChild(card);
    });

  updateCartCount();
</script>
